{"changed":false,"filter":false,"title":"services.js","tooltip":"/routes/services.js","value":"var express = require('express');\nvar ForecastIo = require('forecastio');\nvar DAL = require(\"../firebaseDB\");\nvar CM = require(\"../convManager\");\nvar campaign_selector = require(\"../campaign-selector\");\nvar router = express.Router();\n\n\n\nrouter.post('/addProperty', function(req, res) {\n  \n  var test = req;\n  \n    DAL.addProperty(req.body.uid,req.body.propName,req.body.propValue);\n    \n    res.send(\"updated\");\n\n\n});\n\nrouter.get('/getUidByFacebookId/:Facebook_id?', function(req, res) {\n  \n   DAL.getUidByFacebookId(req.params.Facebook_id).then(function(uid){\n        res.send(uid);\n      \n  },function(){\n      res.send(\"no user found\");\n  });\n  \n  \n  \n\n\n});\nrouter.get('/BindConvManagerToServer/:reciverId', function(req, res) {\n  \n   CM.bindToOngoingCall(req.params.reciverId).then(function(){\n       res.sendStatus(200)\n   },function(error){\n       res.send(error);\n   })\n  \n\n});\nrouter.get('/CampaignSlector/:uid', function(req, res) {\n  \n   campaign_selector.getCampaignByUid(req.params.uid).then(function(cid){\n     res.send(cid);\n   },function(error){\n     res.send(error)\n   })\n  \n\n});\nrouter.get('/geofireMap', function(req, res) {\n  \n   GF.init().then(function(maps){\n     res.send(maps);\n   },function(error){\n     res.send(error);\n   })\n  \n  \n\n\n});\nrouter.get('/Weather/:lat/:lon', function(req, res) {\n  \nvar forecastIo = new ForecastIo('803fccd23763a6555da6b83cbc7a2a4f');\nforecastIo.forecast(req.params.lat, req.params.lon, function(err, data) {\n  if(err){\n      console.log(err.message);\n      res.send(err);\n  }\n    else{\n  var info = JSON.stringify(data, null, 2);\n  console.log(info);\n  res.send(info);\n    }\n});\n\n\n});\n\nmodule.exports = router;","undoManager":{"mark":-1,"position":-1,"stack":[]},"ace":{"folds":[],"scrolltop":0,"scrollleft":0,"selection":{"start":{"row":5,"column":0},"end":{"row":5,"column":30},"isBackwards":true},"options":{"guessTabSize":true,"useWrapMode":false,"wrapToView":true},"firstLineState":0},"timestamp":1439294551592}